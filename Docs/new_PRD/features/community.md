# 커뮤니티 - Show & Share (Community)

## 요약 ⚡

- 내 포트폴리오를 공유(Show)하고, 다른 사람의 포트폴리오를 복사(Copy)하는 소셜 공간
- [P2] 피드, 게시글 작성, 댓글, 분류, 프로필, 검색, 포트폴리오 공유/복사, 좋아요
- [P3] 대댓글, 게시글 공유, 랭킹 시스템, 배지, 이벤트 참여, 피드 정렬 옵션
- Win-Win 구조: 공유자(명예) ↔ 복사자(검증된 포트폴리오) ↔ 플랫폼(광고 수익, 체류 시간)
- 본인인증(PASS) 완료 회원만 커뮤니티 사용 가능

---

## Phase 2 (확장)

### 기능 목록

- [ ] 피드
- [ ] 게시글 작성
- [ ] 댓글
- [ ] 게시글 분류 (말머리)
- [ ] 프로필
- [ ] 검색
- [ ] 포트폴리오 공유 (Show)
- [ ] 포트폴리오 복사 (Copy)
- [ ] 좋아요 기능
- [ ] 본인인증 (PASS 연동)
- [ ] 광고 시청 → 토큰 지급
- [ ] 토큰으로 정밀 분석 기능 이용

### 상세 규칙

#### 1. 피드

| 항목 | 규칙 |
|------|------|
| **표시 콘텐츠** | 게시글 + 포트폴리오 통합 표시 |
| **정렬 기준 (P2)** | 최신순 (기본값) |
| **정렬 기준 (P3)** | 인기순, 팔로잉 우선 추가 |
| **콘텐츠 필터 (P3)** | '게시글만', '포트폴리오만' 선택 기능 |
| **접근 조건** | 본인인증 없이 조회 가능, 상호작용은 인증 필요 |

#### 2. 게시글 작성

| 항목 | 규칙 |
|------|------|
| **작성 조건** | 본인인증 완료 회원만 작성 가능 |
| **글자수 제한** | 2,000~3,000자 |
| **이미지 첨부** | 최대 3~5장 |
| **말머리 선택** | 필수 (카테고리 선택) |
| **수정/삭제** | 본인 작성 글 수정/삭제 가능 |

#### 3. 게시글 분류 (말머리)

| 카테고리 | 설명 |
|----------|------|
| **포트폴리오** | 포트폴리오 공유 및 분석 관련 글 |
| **토론** | 투자 전략, 시장 전망 토론 |
| **질문** | 투자/앱 사용 관련 질문 |
| **국내주식** | 국내 주식 관련 글 |
| **해외주식** | 해외 주식 관련 글 |
| **자유** | 분류되지 않는 자유 글 |

#### 4. 댓글

| 항목 | 규칙 |
|------|------|
| **작성 조건** | 본인인증 완료 회원만 작성 가능 |
| **수정/삭제** | 본인 댓글 수정/삭제 가능 |
| **대댓글 (P3)** | 1단계까지만 지원 (댓글의 댓글까지) |

#### 5. 프로필

| 항목 | 규칙 |
|------|------|
| **닉네임** | 필수, 중복 불가, 수정 가능 |
| **프로필 이미지** | 캐릭터 선택 방식 (직접 업로드 X) |
| **자기소개** | 100~200자 |
| **표시 정보** | 팔로워/팔로잉 수, 최근 게시글, 포트폴리오, 배지 |
| **프로필 편집** | 닉네임, 캐릭터, 자기소개 변경 가능 |

#### 6. 검색 (토스증권 참고)

| 항목 | 규칙 |
|------|------|
| **검색 범위** | 종목, 게시글 제목, 사용자 닉네임 |
| **통합 검색 결과** | 각 카테고리별 최대 5개 표시 |
| **더 보기** | '종목 더 보기', '게시글 더 보기', '사용자 더 보기' |
| **종목 클릭 시** | 해당 종목이 포함된 포트폴리오 리스트 표시 |

**검색 플로우**:

```
1. 검색어 입력 (예: "삼성")
2. 통합 결과 표시:
   - 종목 (최대 5개) + "종목 더 보기"
   - 게시글 (최대 5개) + "게시글 더 보기"
   - 사용자 (최대 5개) + "사용자 더 보기"
3. 종목 클릭 → 해당 종목 포함 포트폴리오 리스트
```

#### 7. Show & Share 컨셉

| 항목 | 설명 |
|------|------|
| **목적** | 포트폴리오를 자랑하고, 다른 사람의 포트폴리오를 참고(Copy)하는 공간 |
| **핵심 가치** | 공유자, 복사자, 플랫폼 모두 이득을 얻는 Win-Win 구조 |

#### 8. Win-Win 구조

| 이해관계자 | 혜택 |
|-----------|------|
| **공유자** | 좋아요 수, 복사 수 등 지표를 통해 **명예(랭킹/배지)** 획득 → 추후 이벤트 참여 자격 |
| **복사자** | 검증된 포트폴리오를 쉽게 **내 것으로** 만듦 |
| **플랫폼** | **광고 수익** 창출 및 앱 **체류 시간 증대** |

#### 9. 포트폴리오 공유 (Show)

| 항목 | 규칙 |
|------|------|
| **공유 조건** | 본인인증 완료 회원만 공유 가능 |
| **공개 설정** | 공개/비공개 선택 가능 |
| **표시 정보** | 포트폴리오 종목 구성, 비율, 좋아요 수, 복사 수 |
| **익명 옵션** | 닉네임 또는 익명으로 공유 선택 가능 |

#### 10. 포트폴리오 복사 (Copy)

| 항목 | 규칙 |
|------|------|
| **복사 조건** | 본인인증 완료 회원만 복사 가능 |
| **복사 대상** | 공개된 포트폴리오의 종목 구성 및 목표 비율 |
| **복사 후** | 복사된 포트폴리오는 내 포트폴리오로 생성됨 (수정 가능) |
| **복사 알림** | 원본 공유자에게 '포트폴리오가 복사되었습니다' 알림 |

#### 11. 좋아요 기능

| 항목 | 규칙 |
|------|------|
| **좋아요 조건** | 본인인증 회원만 가능 |
| **대상** | 포트폴리오, 게시글 모두 가능 |
| **중복 방지** | 사용자당 콘텐츠별 1회 |
| **취소** | 좋아요 취소 가능 |
| **표시** | 콘텐츠 카드에 좋아요 수 표시 |

#### 12. 본인인증 (PASS)

| 항목 | 규칙 |
|------|------|
| **인증 방식** | PASS 앱 연동 (휴대폰 본인인증) |
| **연동 방식** | **포트원(PortOne)** 활용 (간편 연동, SDK 제공) |
| **예상 비용** | 건당 40원 (KG이니시스 통합인증) |
| **인증 시점** | 커뮤니티 기능 첫 사용 시 인증 요청 |
| **인증 상태** | 한 번 인증하면 영구 유지 |
| **미인증 시** | 커뮤니티 탭 조회는 가능, 공유/복사/좋아요/댓글/게시글 작성 불가 |

**포트원 비용 상세**:

| 시기 | 예상 인증 횟수 | 예상 비용/월 |
|------|---------------|-------------|
| 클로즈 베타 (30명) | ~30건 | ~1,200원 |
| 오픈 베타 (500명) | ~500건 | ~2만원 |
| 정식 출시 (1,000명+) | ~1,000건+ | ~4만원 |

> ✅ **P2 확정**: 포트원 활용으로 개발 복잡도 최소화 (3~5일 예상)

---

## 수익화 & 리워드 시스템

### [P2] 광고 & 토큰 시스템

| 항목 | 규칙 |
|------|------|
| **광고 시청** | 리워드 광고 시청 시 토큰 지급 |
| **토큰 사용처** | **정밀 분석 기능** 이용 시 토큰 소모 |
| **토큰 만료** | TBD (무기한 또는 1년 등) |

### [P3] 연구실 (Playground)

| 항목 | 규칙 |
|------|------|
| **개념** | 포트폴리오를 **실험**할 수 있는 Playground |
| **상태** | 🚧 기획 준비 중 |
| **무료 쿠폰** | 신규 사용자에게 **연구실 일주일 무료 쿠폰** 제공 |
| **예상 기능** | 가상 리밸런싱 테스트, 백테스팅, 시뮬레이션 (TBD) |

---

## Phase 3+ (확장 고려사항)

### [P3] 대댓글

| 항목 | 규칙 |
|------|------|
| **깊이 제한** | 1단계만 (댓글 → 대댓글, 대대댓글 X) |
| **수정/삭제** | 본인 대댓글 수정/삭제 가능 |

### [P3] 게시글 공유

| 항목 | 규칙 |
|------|------|
| **공유 방식** | 링크 복사로 외부 공유 |
| **공유 대상** | 카카오톡, SNS 등 외부 플랫폼 |
| **공유 시 표시** | 게시글 미리보기 (OG 태그 적용) |

### [P3] 피드 정렬 옵션

| 항목 | 규칙 |
|------|------|
| **인기순** | 좋아요 수 + 복사 수 + 댓글 수 기반 알고리즘 |
| **팔로잉 우선** | 팔로우한 사용자의 콘텐츠 상단 노출 |

### [P3] 콘텐츠 필터

| 항목 | 규칙 |
|------|------|
| **필터 옵션** | '전체', '게시글만', '포트폴리오만' |
| **기본값** | 전체 |

### [P3] 랭킹 시스템

| 확정 지표 | 검토 중 지표 |
|----------|-------------|
| ❤️ 좋아요 수 | 리밸런싱 빈도 |
| 📋 복사 수 | 목표비율 준수율 |
| | 포트폴리오 유지 기간 |
| | 분산 점수 (종목 수, 섹터 분산도) |

> 💡 리밸런싱 앱 특성에 맞는 지표 추가 검토 중

### [P3] 배지 시스템

| 항목 | 규칙 |
|------|------|
| **배지 유형** | 좋아요 배지, 복사 배지, 장기 운영 배지 등 |
| **배지 효과** | 프로필에 표시, 이벤트 참여 자격 |

### [P3] 이벤트 참여

| 항목 | 규칙 |
|------|------|
| **참여 조건** | 특정 랭킹 이상 또는 배지 보유자 |
| **이벤트 예시** | 수익률 경쟁, 리밸런싱 챌린지 등 |

### [P3] 팔로우/팔로워

| 항목 | 규칙 |
|------|------|
| **팔로우** | 관심 있는 포트폴리오 공유자를 팔로우 |
| **피드** | 팔로우한 사람의 포트폴리오 업데이트 피드 |
| **프로필 표시** | 팔로워/팔로잉 수 표시 |

---

## P1/P2 설계 시 고려사항

> ⚠️ 현재 설계 시 아래를 **미리 고려**하여 구현

### DB 컬럼 예약

| 테이블 | 컬럼 | Phase | 설명 |
|--------|------|-------|------|
| `users` | `is_verified` | P2 | 본인인증 완료 여부 (BOOLEAN) |
| `users` | `token_balance` | P2 | 토큰 보유량 (INT) |
| `users` | `nickname` | P2 | 닉네임 (VARCHAR) |
| `users` | `profile_character` | P2 | 프로필 캐릭터 ID (INT) |
| `users` | `bio` | P2 | 자기소개 (VARCHAR, 200자) |
| `portfolios` | `is_public` | P2 | 공개 여부 (BOOLEAN) |
| `portfolios` | `like_count` | P2 | 좋아요 수 (INT, 캐시용) |
| `portfolios` | `copy_count` | P2 | 복사 수 (INT, 캐시용) |

### 신규 테이블 예상

| 테이블 | 설명 | Phase |
|--------|------|-------|
| `posts` | 게시글 | P2 |
| `post_categories` | 게시글 카테고리 (말머리) | P2 |
| `comments` | 댓글 | P2 |
| `replies` | 대댓글 | P3 |
| `portfolio_likes` | 포트폴리오 좋아요 기록 | P2 |
| `post_likes` | 게시글 좋아요 기록 | P2 |
| `portfolio_copies` | 복사 기록 | P2 |
| `user_tokens` | 토큰 적립/사용 내역 | P2 |
| `follows` | 팔로우 관계 | P3 |
| `rankings` | 랭킹 스냅샷 | P3 |
| `badges` | 배지 정의 및 보유 현황 | P3 |
| `characters` | 프로필 캐릭터 정의 | P2 |

---

## 확인 필요 사항

| 항목 | 상태 | 비고 |
|------|------|------|
| ~~PASS 연동 복잡도/비용~~ | ✅ 확정 | 포트원 활용, 건당 40원 |
| ~~피드 정렬 기준~~ | ✅ 확정 | P2: 최신순, P3: 인기순/팔로잉 |
| ~~게시글 카테고리~~ | ✅ 확정 | 6개 카테고리 확정 |
| ~~프로필 이미지 방식~~ | ✅ 확정 | 캐릭터 선택 방식 |
| 연구실 상세 기획 | 🚧 준비 중 | 어떤 실험 기능을 제공할지 정의 필요 |
| 랭킹 지표 확정 | 💭 고민 중 | 리밸런싱 앱에 적합한 지표 선정 |
| 정밀 분석 기능 범위 | TBD | 토큰으로 사용할 수 있는 기능 정의 |
| 캐릭터 디자인 | TBD | 프로필 캐릭터 종류/커스텀 범위 |

---

## 관련 문서

- **포트폴리오 공유**: `features/portfolio.md#P2-포트폴리오-공유`
- **알림**: `features/notification.md` (복사 알림 등)
- **DB**: `reference/db-schema.md#users`, `reference/db-schema.md#portfolios`
- **인증**: `features/auth.md`

---

> 📅 **작성일**: 2026-01-09 (최종 수정: 2026-01-13)  
> 📝 **Phase**: Phase 2~3  
> 🎯 **중요도**: 중요 (사용자 참여 및 수익화)
