# 🤖 AI 워크플로우 문서 구조 제안

## 개요

에이전트(AI)가 작업 시 올바른 문서를 참조하고, 일관된 품질로 작업을 수행할 수 있도록 **"맥도날드 방식"** 문서 구조를 도입합니다.

| 역할 | 비유 | 책임 |
|------|------|------|
| PM | 사장 | PRD 작성, 비전/우선순위 결정 |
| 바이브코더 | 지점장 | Skill 문서 작성, 품질 관리, 에이전트 지시 |
| 에이전트 | 알바생 | 지침에 따라 효율적으로 작업 수행 |

---

## 📂 디렉터리 구조

```
docs/
├── agent/                          # 🤖 에이전트용 문서 (AI 워크플로우)
│   │
│   ├── RULES.md                    # ⭐ 대원칙 (항상 먼저 읽음)
│   │                               #    - 핵심 원칙 (범위, 품질, 정확성)
│   │                               #    - 문서 참조 가이드 (언제 어떤 문서를 볼지)
│   │                               #    - 금지 사항
│   │
│   ├── skills/                     # 작업별 가이드 (필요시 참조)
│   │   ├── planning.md             #    - 기능 기획 방법
│   │   ├── frontend.md             #    - React Native 개발 규칙
│   │   ├── backend.md              #    - Spring Boot 개발 규칙
│   │   ├── rebalancing.md          #    - 리밸런싱 로직 명세 ⭐
│   │   ├── korea-investment-api.md #    - 한투 API 연동 가이드
│   │   ├── auth-flow.md            #    - 인증/JWT 플로우
│   │   ├── testing.md              #    - 테스트 작성 가이드
│   │   └── deployment.md           #    - 배포 가이드
│   │
│   ├── context/                    # 프로젝트 컨텍스트 (레퍼런스)
│   │   ├── tech-stack.md           #    - 기술 스택 요약
│   │   └── db-schema.md            #    - DB 스키마 명세
│   │
│   └── templates/                  # 산출물 템플릿
│       ├── plan-template.md        #    - 구현 계획서 템플릿
│       └── pr-template.md          #    - PR 템플릿
│
├── PRD.md                          # 📋 요구사항 정의서 (통합본)
│
└── details/                        # PRD 상세 문서
    ├── 1-tech-spec.md              #    - 기술 명세
    ├── 2-business-logic.md         #    - 비즈니스 로직
    ├── 3-ui-ux.md                  #    - UI/UX 요구사항
    ├── 4-data-security.md          #    - 데이터 및 보안
    ├── 5-performance.md            #    - 성능 및 확장성
    └── 6-test-deploy.md            #    - 테스트 및 배포
```

---

## 🔄 에이전트 작업 흐름

```
요청 수신 → RULES.md 읽기 → 작업 유형 판단 → 문서 참조 여부 결정 → 작업 수행
```

### 문서 참조 기준 (RULES.md에 명시)

| 분류 | 예시 | 문서 참조 |
|------|------|-----------|
| **필수 참조** | 리밸런싱 로직, DB 스키마 변경, 한투 API | 반드시 해당 skill 읽은 후 작업 |
| **권장 참조** | 복잡한 UI 개발, 테스트 작성 | 복잡도에 따라 판단 |
| **자율 진행** | 간단한 버그 수정, 리팩터링 | 문서 없이 바로 작업 |

---

## 📄 RULES.md 초안 (핵심 내용)

### 핵심 원칙

1. **범위 준수**: Phase 1 MVP만 구현
2. **품질 우선**: 비즈니스 로직은 TDD
3. **금융 정확성**: 소수점 4자리(수량), 2자리(비율)
4. **일관성**: 한국어 커밋, Conventional Commits

### 금지 사항

- 임의 기능 추가 금지
- Phase 2/3 기능 구현 금지
- API Key 하드코딩 금지
- 테스트 없이 커밋 금지

---

## ✅ 기대 효과

| 효과 | 설명 |
|------|------|
| **토큰 절약** | 필요한 문서만 선택적 참조 |
| **일관성** | 동일한 규칙으로 작업 수행 |
| **품질 보장** | 품질 게이트, 체크리스트 내장 |
| **온보딩** | 새 팀원/에이전트도 문서만 보고 작업 가능 |

---

## 💬 논의 필요 사항

1. 폴더 경로: `docs/agent/` OK?
2. 추가할 skill 문서 있는지?
3. RULES.md 내용 수정 사항?
